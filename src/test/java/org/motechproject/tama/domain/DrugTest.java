package org.motechproject.tama.domain;

import junit.framework.Assert;
import org.apache.commons.collections.CollectionUtils;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

import java.util.Arrays;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Drug.class)
public class DrugTest {

	@Test
	public void addBrands() {
		Drug drug = new Drug();
		Brand brandOne = new Brand("one");
		Brand brandTwo = new Brand("two");
		drug.addBrand(brandOne);
		drug.addBrand(brandTwo);
		
		Assert.assertEquals(2, drug.getBrands().size());
		Assert.assertTrue(drug.getBrands().containsAll(Arrays.asList(brandOne, brandTwo)));
	}
	
	@Test
	public void removeBrands() {
		Drug drug = new Drug();
		Brand brandOne = new Brand("brand one");
		
		Brand brandTwo = new Brand("brand two");
		drug.addBrand(brandOne);
		drug.addBrand(brandTwo);
		
		Assert.assertEquals(2, drug.getBrands().size());
		drug.removeBrand(brandTwo);

		Assert.assertEquals(1, drug.getBrands().size());
		Assert.assertEquals(brandOne.getName(), ((Brand)CollectionUtils.get(drug.getBrands(), 0)).getName());
	}
}
