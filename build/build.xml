<?xml version="1.0" encoding="UTF-8"?>
<project name="tama" basedir=".">

    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
        <classpath>
            <pathelement location="lib/ant-contrib-1.0b3.jar"/>
        </classpath>
    </taskdef>

    <property file="${basedir}\build.properties"/>

    <path id="lib.path">
        <fileset dir="../tama.web/target/tama-0.3-SNAPSHOT/WEB-INF/lib" includes="**/*.jar"/>
    </path>

    <target name="load.seed.data">
        <echo message="Loading Seed Data.."/>
        <java fork="false" classname="${seed.main.class}">
            <classpath>
                <path location="../tama.web/target/tama-0.3-SNAPSHOT/WEB-INF/classes"/>
                <path refid="lib.path"/>
            </classpath>
        </java>

        <if>
            <equals arg1="${audio.seed.load}" arg2="true"/>
            <then>
                <antcall target="load.audio.seed"/>
            </then>
        </if>
    </target>

    <target name="load.audio.seed">
        <echo message="Loading Audio Seed.."/>
        <java fork="false" classname="${audio.seed.loader.class}">
            <classpath>
                <path location="../tama.web/target/tama-0.3-SNAPSHOT/WEB-INF/classes"/>
                <path refid="lib.path"/>
            </classpath>
        </java>
        <path refid="lib.path"/>
    </target>

    <target name="setup.outbox.messages">
        <echo message="Loading outbox messages..."/>
        <java fork="false" classname="${outboxmessage.setup.main.class}">
            <classpath>
                <path location="../tama.web/target/tama-0.3-SNAPSHOT/WEB-INF/classes"/>
                <path refid="lib.path"/>
            </classpath>
            <arg line="${params}"></arg>
        </java>
    </target>

    <target name="drop.db">
        <exec executable="curl">
            <arg value="-X"/>
            <arg value="DELETE"/>
            <arg value="http://${db.server}:5984/${db.name}"/>
        </exec>
    </target>

</project>
